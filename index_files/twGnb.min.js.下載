/*!
    project: nct-gnb
    version: 1.3.5
    update: 2019-08-23 18:02:01 PM
    author: khs
*/
!function(){"use strict";function a(){var a={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},b=/&(?!#?\w+;)|<|>|"|'|\//g;return function(){return this?this.replace(b,function(b){return a[b]||b}):this}}function b(a,c,d){return("string"==typeof c?c:c.toString()).replace(a.define||g,function(b,c,e,f){return 0===c.indexOf("def.")&&(c=c.substring(4)),c in d||(":"===e?(a.defineParams&&f.replace(a.defineParams,function(a,b,e){d[c]={arg:b,text:e}}),c in d||(d[c]=f)):new Function("def","def['"+c+"']="+f)(d)),""}).replace(a.use||g,function(c,e){a.useParams&&(e=e.replace(a.useParams,function(a,b,c,e){if(d[c]&&d[c].arg&&e){var f=(c+":"+e).replace(/'|\\/g,"_");return d.__exp=d.__exp||{},d.__exp[f]=d[c].text.replace(new RegExp("(^|[^\\w$])"+d[c].arg+"([^\\w$])","g"),"$1"+e+"$2"),b+"def.__exp['"+f+"']"}}));var f=new Function("def","return "+e)(d);return f?b(a,f,d):f})}function c(a){return a.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var d,e={version:"1.0.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1},template:void 0,compile:void 0};"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):(d=function(){return this||(0,eval)("this")}(),d.doT=e),String.prototype.encodeHTML=a();var f={append:{start:"'+(",end:")+'",endencode:"||'').toString().encodeHTML()+'"},split:{start:"';out+=(",end:");out+='",endencode:"||'').toString().encodeHTML();out+='"}},g=/$^/;e.template=function(d,h,i){h=h||e.templateSettings;var j,k,l=h.append?f.append:f.split,m=0,n=h.use||h.define?b(h,d,i||{}):d;n=("var out='"+(h.strip?n.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):n).replace(/'|\\/g,"\\$&").replace(h.interpolate||g,function(a,b){return l.start+c(b)+l.end}).replace(h.encode||g,function(a,b){return j=!0,l.start+c(b)+l.endencode}).replace(h.conditional||g,function(a,b,d){return b?d?"';}else if("+c(d)+"){out+='":"';}else{out+='":d?"';if("+c(d)+"){out+='":"';}out+='"}).replace(h.iterate||g,function(a,b,d,e){return b?(m+=1,k=e||"i"+m,b=c(b),"';var arr"+m+"="+b+";if(arr"+m+"){var "+d+","+k+"=-1,l"+m+"=arr"+m+".length-1;while("+k+"<l"+m+"){"+d+"=arr"+m+"["+k+"+=1];out+='"):"';} } out+='"}).replace(h.evaluate||g,function(a,b){return"';"+c(b)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,"").replace(/(\s|;|\}|^|\{)out\+=''\+/g,"$1out+="),j&&h.selfcontained&&(n="String.prototype.encodeHTML=("+a.toString()+"());"+n);try{return new Function(h.varname,n)}catch(a){throw a}},e.compile=function(a,b){return e.template(a,null,b)}}(),function(){window.nc||(window.nc={}),nc.twGnb||(nc.twGnb={});var a={};a.header='{{{header}}}\n\x3c!--<div class="gnbMini"><p class="logo ncsoft">ncsoft</p></div>--\x3e\n{{? it.userInfo.login && (it.isGameBannedInfoBarExposedSite || it.isAccountInfoBarsExposedSite) }}\n<div class="infoBar">\n    {{? it.userInfo.reasonCode != 1 && it.userInfo.gameBanned && it.isGameBannedInfoBarExposedSite }}\n    <div class="outer gameBanned">\n        <div class="wrap">\n            <a href="#" class="close">{{=it.data.infoBarStr.close}}</a>\n            <p>{{=it.data.infoBarStr.gameBanned_1}}<a href="https://{{=it.twGnb.isRc}}tw.ncsoft.com/faq">{{=it.data.infoBarStr.gameBanned_2}}</a>{{=it.data.infoBarStr.gameBanned_3}}</p>\n        </div>\n    </div>\n    {{?}}\n    \n    {{? it.isAccountInfoBarsExposedSite }}\n        {{? it.userInfo.changeStatus == 4 }}\n        <div class="outer systemError">\n            <div class="wrap">\n                <a href="#" class="close">{{=it.data.infoBarStr.close}}</a>\n                <p>{{=it.data.infoBarStr.systemError_1}}{{=it.data.infoBarStr.systemError_2}}<a href="https://{{=it.twGnb.isRc}}tw.ncsoft.com/ap/wb/account/loginname/cancel">{{=it.data.infoBarStr.cancel}}</a>{{=it.data.infoBarStr.systemError_3}}</p>\n            </div>\n        </div>\n        {{?? it.userInfo.changeLoginNameInProgress }}\n        <div class="outer changeAccount">\n            <div class="wrap">\n                <a href="#" class="close">{{=it.data.infoBarStr.close}}</a>\n                <p>{{=it.data.infoBarStr.accountChangeInProgress}} ({{=it.data.infoBarStr.completionDate}}: {{= it.userInfo.changeLoginNameCompletionTime }})</p>\n            </div>\n        </div>\n        {{?}}\n    {{?}}\n</div>\n{{?}}\n<div class="ncGnb">\n    <div class="wrap">\n        <ul class="gnbLeft">\n            <li class="logo ncsoft"><a href="http://{{=it.twGnb.isRc}}tw.ncsoft.com" title="NCSOFT">NCSOFT</a></li>\n            <li id="gnbBtnGameList" class="btnList"><span>{{=it.data.headerStr.games}}</span></li> \x3c!-- on --\x3e\n        </ul>\n        <div class="gnbMenu">\n            {{? it.userInfo.login}}\n            <div class="myInfo"> \x3c!-- on --\x3e\n                <p class="user {{=(it.userInfo.facebook) ? \'FB\' : \'NC\'}}"><span>{{=it.userInfo.name}}</span></p>\n                <ul class="myMenu">\n                    <li class="nCoin">\n                        <strong>{{=it.userInfo.balance}}</strong>\n                        <a class="btnCharge" href="https://{{=it.twGnb.isRc}}tw.ncsoft.com/nshop/ncoin/charge/list">{{=it.data.headerStr.charge}}</a>\n                    </li>\n                    <li><a href="https://{{=it.twGnb.isRc}}tw.ncsoft.com/ap/wb/account/profile">{{=it.data.headerStr.profile}}</a></li>\n                    <li><a href="https://{{=it.twGnb.isRc}}tw.ncsoft.com/nshop/myaccount/history/chargehistory">{{=it.data.headerStr.transactionHistory}}</a></li>\n                </ul>\n            </div>\n            {{?}}\n\n            <div class="menu">\n                <ul>\n                    {{? !it.userInfo.login}}\n                    <li>\n                        <a href="https://{{=it.twGnb.isRc}}tw.ncsoft.com/ap/wb/signup/email/join">{{=it.data.headerStr.signup}}</a>\n                    </li>\n                    {{?}}\n                    <li>\n                        <a href="https://{{=it.twGnb.isRc}}tw.ncsoft.com/nshop/myaccount/applyacode">\n                            <span>{{=it.data.headerStr.ApplyACode}}</span>\n                        </a>\n                    </li>\n                    <li>\n                        <a href="https://{{=it.twGnb.isRc}}tw.ncsoft.com/faq/contactUs">\n                            {{=it.data.headerStr.support}}\n                            <em class="gnbNotify" style="display:none;">N</em>\n                        </a>\n                    </li>\n\n                    {{? it.userInfo.login}}\n                    <li>\n                        <a href="https://{{=it.twGnb.isRc}}tw.ncsoft.com/login/logout?return_url={{=it.twGnb.returnUrl}}">{{=it.data.headerStr.logout}}</a>\n                    </li>\n                    {{??}}\n                    <li>\n                        <a href="https://{{=it.twGnb.isRc}}tw.ncsoft.com/login/signin?return_url={{=it.twGnb.returnUrl}}">{{=it.data.headerStr.login}}</a>\n                    </li>\n                    {{?}}\n                </ul>\n            </div>\n        </div>\n    </div>\n\n    <div id="gnbGameList" class="gnb-games" style="display:none;">\n        <div class="list-container">\n            <div class="pc">\n                <p class="title">{{=it.data.headerStr.pc}}</p>\n                <ul>\n                    <li class="game bns">\n                        <a href="http://{{=it.twGnb.isRc}}tw.ncsoft.com/bns"><span class="thumb"></span>{{=it.data.headerStr.bns}}</a>\n                    </li>\n                    <li class="game aion">\n                        <a href="http://{{=it.twGnb.isRc}}tw.ncsoft.com/aion"><span class="thumb"></span>{{=it.data.headerStr.aion}}</a>\n                    </li>\n                    <li class="game lineage2">\n                        <a href="http://{{=it.twGnb.isRc}}tw.ncsoft.com/lineage2/"><span class="thumb"></span>{{=it.data.headerStr.lineage2}}</a>\n                    </li>\n                </ul>\n            </div>\n            <div class="mobile">\n                <p class="title">{{=it.data.headerStr.mobile}}</p>\n                <ul>\n                    <li class="game irism">\n                        <a href="http://{{=(it.twGnb.isRc === \'rc-\') ? \'rc.\' : \'\'}}tw.nc.com/irism" target="_blank"><span class="thumb"></span>{{=it.data.headerStr.irism}}</a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n</div>\n\n{{{headerBase}}}\n\x3c!--<div class="gnbMini"><p class="logo ncsoft">ncsoft</p></div>--\x3e\n<div class="ncGnb">\n    <div class="wrap">\n        <ul class="gnbLeft">\n            <li class="logo ncsoft"><a href="http://{{=it.twGnb.isRc}}tw.ncsoft.com" title="NCSOFT">NCSOFT</a></li>\n            <li id="gnbBtnGameList" class="btnList"><span>{{=it.data.headerStr.games}}</span></li>\n        </ul>\n        <div class="gnbMenu">\n        </div>\n    </div>\n    \n    <div id="gnbGameList" class="gnb-games" style="display:none;">\n        <div class="list-container">\n            <div class="pc">\n                <p class="title">{{=it.data.headerStr.pc}}</p>\n                <ul>\n                    <li class="game bns">\n                        <a href="http://{{=it.twGnb.isRc}}tw.ncsoft.com/bns"><span class="thumb"></span>{{=it.data.headerStr.bns}}</a>\n                    </li>\n                    <li class="game aion">\n                        <a href="http://{{=it.twGnb.isRc}}tw.ncsoft.com/aion"><span class="thumb"></span>{{=it.data.headerStr.aion}}</a>\n                    </li>\n                    <li class="game lineage2">\n                        <a href="http://{{=it.twGnb.isRc}}tw.ncsoft.com/lineage2/"><span class="thumb"></span>{{=it.data.headerStr.lineage2}}</a>\n                    </li>\n                </ul>\n            </div>\n            <div class="mobile">\n                <p class="title">{{=it.data.headerStr.mobile}}</p>\n                <ul>\n                    <li class="game irism">\n                        <a href="http://{{=(it.twGnb.isRc === \'rc-\') ? \'rc.\' : \'\'}}tw.nc.com/irism" target="_blank"><span class="thumb"></span>{{=it.data.headerStr.irism}}</a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n</div>\n\n{{{userInfoLayer}}}\n<div id="mobile-userinfo-layer">\n    <a href="#" class="close">close</a>\n    \n    {{? it.userInfo }}\n        {{? it.userInfo.login }}\n        <div class="contents login {{=(it.userInfo.facebook) ? \'FB\' : \'\'}}">\n            <dl>\n                <dt class="icon-profile"></dt>\n                <dd class="nickname">{{=it.userInfo.name}}</dd>\n            </dl>\n            <a id="btn-userinfo-logout" href="https://{{=it.twGnb.isRc}}tw.ncsoft.com/login/logout?return_url={{=it.twGnb.returnUrl}}">{{=it.data.headerStr.logout}}</a>\n        </div>\n        {{??}}\n        <div class="contents logout">\n            <strong class="logo">NCSOFT</strong>\n            <ul>\n                <li><a id="btn-userinfo-login" href="https://{{=it.twGnb.isRc}}tw.ncsoft.com/login/signin?return_url={{=it.twGnb.returnUrl}}">{{=it.data.headerStr.login}}</a></li>\n            </ul>\n            <a id="btn-userinfo-signup" href="https://{{=it.twGnb.isRc}}tw.ncsoft.com/ap/wb/signup/email/join">{{=it.data.headerStr.signup}}</a>\n        </div>\n        {{?}}\n    {{??}}\n    <div class="loadingbar"></div>\n    {{?}}\n</div>\n\n{{{mxmAccountInfoBar}}}\n\x3c!-- use only NCT MXM. add in <div class="login-info-layeer"></div> --\x3e\n{{? it.userInfo.login}}\n    {{? it.userInfo.changeStatus == 4 }}\n    <div class="info-message">\n        <span>{{=it.data.infoBarStr.systemError_1}}</span>\n        <i class="icon icon-self-arrow-down"></i>\n    </div>\n\n    <div class="info-link-wrap">\n        <div class="info-link">\n            <span class="info-link-message">{{=it.data.infoBarStr.systemError_2}}<a href="https://{{=it.twGnb.isRc}}tw.ncsoft.com/ap/wb/account/loginname/cancel">{{=it.data.infoBarStr.cancel}}</a>{{=it.data.infoBarStr.systemError_3}}<i class="icon icon-self-arrow-right"></i></span>\n        </div>\n        <a class="info-self-close nct-error" href="#"><i class="icon"></i></a>\n    </div>\n    \n    {{?? it.userInfo.changeLoginNameInProgress }}\n    <div class="info-message">\n        <span>{{=it.data.infoBarStr.accountChangeInProgress}}</span>\n        <i class="icon icon-self-arrow-down"></i>\n    </div>\n\n    <div class="info-link-wrap">\n        <div class="info-link">\n            <span class="info-link-message">({{=it.data.infoBarStr.completionDate}}: {{= it.userInfo.changeLoginNameCompletionTime }})</span>             \n        </div>\n        <a class="info-self-close nct-progress" href="#"><i class="icon"></i></a>\n    </div>\n    {{?}}\n{{?}}\n    ',nc.twGnb.tmplHeader=a}(),function(){window.nc||(window.nc={}),nc.twGnb||(nc.twGnb={});var a={};a.footer='{{{footer}}}\n{{? it.isRwdSite }}\n<div class="ncFooterMini">© NCSOFT</div>\n{{?}}\n<div class="ncFooter">\n    <div class="logo">\n        <p class="nc"><a title="NCSOFT" href="http://global.ncsoft.com/global/" target="_blank">NCSOFT</a></p>\n        <p class="nct"><a title="NCSOFT TAIWAN" href="http://www.nctaiwan.com/" target="_blank">NCSOFT TAIWAN</a></p>\n    </div>\n    <div class="footerMenu">\n        <a class="terms" href="https://{{=it.twGnb.isRc}}tw.ncsoft.com/ap/wb/legal/termsOfUse">{{=it.footerStr.termsOfUse}}</a>\n        <a class="contact" href="https://{{=it.twGnb.isRc}}tw.ncsoft.com/faq/contactUs">{{=it.footerStr.contactUs}}</a>\n        <address>{{=it.footerStr.copyright}}</address>\n    </div>\n</div>',nc.twGnb.tmplFooter=a}(),window.nc||(window.nc={}),nc.twGnb||(nc.twGnb={}),function(a){"use strict";nc.twGnb.util={};var b=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},c=function(a){var b=document.cookie;if(-1===b.indexOf(a))return!1;var c=b.substr(b.indexOf(a));return c=c.split(";")[0],c=c.substr(c.indexOf("=")+1)},d=function(a,b,c,d){var e="";if(d){var f=new Date;f.setDate(f.getDate()+d),e="expires="+f.toGMTString()+";"}document.cookie=a+"="+window.escape(b)+"; path=/; domain="+c+";"+e},e=function(a){return null!==a&&void 0!==a&&!0},f=function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},g=function(a){for(var b,c,d={},e=a.split("{{{"),f=0,g=e.length;f<g;f++)""!==(b=e[f])&&(c=b.split("}}}"),d[nc.twGnb.util.trim(c[0])]=nc.twGnb.util.trim(c[1]));return d},h=function(a,b){var c=a||window.location,d="",e=b||"",f=c.origin?c.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");return new RegExp("http://"+e+"tw.ncsoft.com").test(f)?(0===c.pathname.indexOf("/bns")||c.pathname.indexOf("/mxm"),d=c.href):/\.plaync\.com\.tw/.test(f)&&(0===c.host.indexOf("aion")?d=c.href:0===c.host.indexOf("lineage2")&&(d=c.href)),d},i=function(a,b){var c=",";e(b)&&(c=b);for(var d=String(a).split(""),f=d.length,g=Math.ceil(f/3),h=1;h<g;h++)d.splice(f-3*h,0,c);return d.join("")},j=function(b,c,d,f){var g="...",h=a(b);if(!(h.length<=0)){var i=e(c)?c:0,j=e(d)?d:0;f&&b.text(f);var k=h.text();if(!(h.width()<=0)){var l=h.parent(),m=h.clone();m.css({display:"none",position:"absolute",width:"auto",height:"auto"}),l.append(m);for(var n=!1,o="",p=0,q=k.length;p<q;p++)if(o+=k.charAt(p),m.text(o),h.width()<=m.width()+i+j){o=o.substr(0,o.length-1),n=!0;break}n&&(o=o.substr(0,o.length-g.length)+g,h.text(o)),m.remove()}}},k={ua:navigator.userAgent,isIE:function(){return/msie/i.test(navigator.userAgent)||/trident/i.test(navigator.userAgent)}(),getIEVersion:function(){if(this.isIE){if(/msie (\d+\.\d+);/i.test(navigator.userAgent))return parseFloat(RegExp.$1,10);if(/trident.*rv:(\d+)\.(\d+)/i.test(navigator.userAgent))return parseFloat(RegExp.$1,10)}return-1}};nc.twGnb.util.indexOf=b,nc.twGnb.util.getCookie=c,nc.twGnb.util.setCookie=d,nc.twGnb.util.isDefined=e,nc.twGnb.util.trim=f,nc.twGnb.util.getParseTmplObj=g,nc.twGnb.util.getReturnUrl=h,nc.twGnb.util.numberToPriceStr=i,nc.twGnb.util.ellipsis=j,nc.twGnb.util.browser=k}(jQuery),window.nc||(window.nc={}),nc.twGnb||(nc.twGnb={}),function(a){"use strict";function b(b,c){function d(){K.empty().append(L({userInfo:null})),a("#mobile-userinfo-layer .close").on("click",function(a){a.preventDefault(),window.closeGnbSideWrap()})}function e(){K.empty().append(L({twGnb:nc.twGnb,data:nc.twGnb.data,userInfo:C})),a("#mobile-userinfo-layer .close").on("click",function(a){a.preventDefault(),window.closeGnbSideWrap()})}c&&(K=c),K&&(C?K.has(a("#mobile-userinfo-layer")).length<=0&&L?e():b&&e():K.has(a("#mobile-userinfo-layer")).length<=0&&L?d():b&&d())}function c(){if(nc.twGnb.isRwdSite){if(!A.browser.isIE||A.browser.getIEVersion()<=8==!1)return;var b=a("body").width(),c=a(".ncFooter",E),d=a(".ncFooterMini",E);b>=960?(c.show(),d.hide()):(c.hide(),d.show())}}function d(){e(),j(k,null)}function e(){var a=A.getParseTmplObj(nc.twGnb.tmplHeader.header),b=doT.template(a.headerBase);D.append(b({twGnb:nc.twGnb,data:nc.twGnb.data}));var c=A.getParseTmplObj(nc.twGnb.tmplHeader.header);L=doT.template(c.userInfoLayer),f(!0),g()}function f(b){function c(a){a?(G.addClass("on"),F.show(),h(!0)):(G.removeClass("on"),F.hide(),h(!1))}F=a("#gnbGameList",D),G=a("#gnbBtnGameList",D),b?(G.on("mouseenter",function(a){F.is(":visible")||c(!0)}),G.on("mouseleave",function(a){c(!1)}),G.on("click",function(a){a.preventDefault(),a.stopPropagation(),c(F.is(":visible")?!1:!0)}),F.on("mouseenter",function(a){c(!0)}),F.on("mouseleave",function(a){c(!1)})):(G.off("mouseenter"),G.off("click"))}function g(){var b=new RegExp(w.join("|"));a(".game",F).each(function(){b.test(this.className)||a(this).remove()})}function h(b){b?a("body").on("click",i):a("body").off("click",i)}function i(b){a(".ncGnb",D).has(b.target).length<=0&&(G.removeClass("on"),F.hide(),h(!1))}function j(b,c){var d="/main/userInfo";switch(nc.twGnb.siteFlag){case"bns":d="/gnb/bns";break;case"aion":d="/gnb/aion";break;case"lineage2":d="/gnb/lineage2";break;case"mxm":case"portalMain":d="/main/userInfo";break;default:d="/main/userInfo"}var e=B+"://"+nc.twGnb.isRc+"tw.ncsoft.com"+d;"opdev."===nc.twGnb.envPrefix&&(e=B+"://opdev.tw.ncsoft.com:31022"+d),a.ajax({type:"GET",url:e,data:{timeStamp:+new Date},dataType:"jsonp",cache:!1,beforeSend:function(){},success:b,error:c})}function k(c){if(c){C=c,C.balance=A.numberToPriceStr(C.balance>=0?C.balance:0);var d=A.getParseTmplObj(nc.twGnb.tmplHeader.header);L=doT.template(d.userInfoLayer),b(!0),f(!1),h(!1);var e=A.getParseTmplObj(nc.twGnb.tmplHeader.header),i=doT.template(e.header);if(D.html(i({twGnb:nc.twGnb,data:nc.twGnb.data,userInfo:C,isGameBannedInfoBarExposedSite:r(nc.twGnb.siteFlag),isAccountInfoBarsExposedSite:s(nc.twGnb.siteFlag)})),f(!0),g(),A.ellipsis(a(".myInfo .user span"),20,15),C.login){if(l(),m(),r(nc.twGnb.siteFlag)||s(nc.twGnb.siteFlag))n();else if("mxm"===nc.twGnb.siteFlag){var j=A.getParseTmplObj(nc.twGnb.tmplHeader.header),k=doT.template(j.mxmAccountInfoBar),o=a(".login-info-layer");4==C.changeStatus?(o.addClass("nct-error"),o.html(k({twGnb:nc.twGnb,data:nc.twGnb.data,userInfo:C})),window.checkCookieRealname&&window.checkCookieRealname()):C.changeLoginNameInProgress&&(o.addClass("nct-progress"),o.html(k({twGnb:nc.twGnb,data:nc.twGnb.data,userInfo:C})),window.checkCookieRealname&&window.checkCookieRealname())}}else"opdev."===nc.twGnb.envPrefix&&m()}}function l(){var b=a(".ncGnb .myInfo",D);b.on("mouseenter",function(a){b.addClass("on")}),b.on("mouseleave",function(a){b.removeClass("on")})}function m(){try{var b=B+"://"+nc.twGnb.isRc+"tw.ncsoft.com/ticket/api/external/inquiry/unread";"opdev."===nc.twGnb.envPrefix&&(b=B+"://opdev-ticket.tw.ncsoft.com/ticket/api/external/inquiry/unread"),a.ajax({type:"GET",url:b,data:{timeStamp:+new Date},dataType:"jsonp",cache:!1,beforeSend:function(){},success:function(b){1==b.result&&a(".gnbNotify",D).show()},error:function(a){}})}catch(a){window.console}}function n(){var b="";if(b="NP"===nc.twGnb.platform?nc.twGnb.isRc+u:v,H=a(".infoBar .outer.systemError",D),I=a(".infoBar .outer.changeAccount",D),J=a(".infoBar .outer.gameBanned",D),4==C.changeStatus){var c=A.getCookie("systemErrorAccount")!==window.escape(C.name);H.length&&(H.toggle(c),a(".close",H).on("click",function(a){a.preventDefault(),H.hide(),A.setCookie("systemErrorAccount",C.name,b),o()}))}else{var d=A.getCookie("changeAccount")!==window.escape(C.name)&&!0===C.changeLoginNameInProgress;I.length&&(I.toggle(d),a(".close",I).on("click",function(a){a.preventDefault(),I.hide(),A.setCookie("changeAccount",C.name,b),o()}))}var e=A.getCookie("bannedAccount")!==window.escape(C.name)&&!0===C.gameBanned;J.length&&(J.toggle(e),a(".close",J).on("click",function(a){a.preventDefault(),J.hide(),A.setCookie("bannedAccount",C.name,b),o()})),o()}function o(){var b=0;H&&H.is(":visible")?b++:I&&I.is(":visible")&&b++,J&&J.is(":visible")&&b++,b<=0&&a(".infoBar",D).remove(),"bns"===nc.twGnb.siteFlag&&(b<=0?a("#contentArea").removeClass("globalgnb"):a("#contentArea").addClass("globalgnb"))}function p(){var a=A.getParseTmplObj(nc.twGnb.tmplFooter.footer),b=doT.template(a.footer);E.append(b({isRwdSite:nc.twGnb.isRwdSite,twGnb:nc.twGnb,footerStr:nc.twGnb.data.footerStr}))}function q(a){return A.indexOf(x,a)>=0}function r(a){return A.indexOf(y,a)>=0}function s(a){return A.indexOf(z,a)>=0}nc.twGnb.data={infoBarStr:{accountChangeInProgress:"電子郵件地址變更進行中。",completionDate:"完成日期",systemError_1:"您的電子郵件地址變更已失敗。",systemError_2:"請",systemError_3:"並重新申請。",cancel:"取消",gameBanned_1:"您的帳戶目前已被鎖定。請洽 ",gameBanned_2:"NCSOFT 客服中心",gameBanned_3:"以取得詳細資訊。",close:"關閉"},headerStr:{pc:"PC遊戲",mobile:"Mobile遊戲",bns:"劍靈",mxm:"MXM",aion:"AION",lineage2:"新天堂II",rk:"天堂 Red Knights",irism:"瞳光 IRIS M",charge:"儲值",profile:"帳戶資訊",transactionHistory:"交易記錄",signup:"免費註冊",ApplyACode:"酷碰專區",support:"客服中心",logout:"登出",login:"登入",games:"遊戲選擇",download:"遊戲下載",shop:"遊戲商城"},footerStr:{termsOfUse:"會員規範",contactUs:"聯絡客服",copyright:"Copyright © NCSOFT Corporation. All Rights Reserved."}},nc.twGnb.platform=/tw\.ncsoft\.com/i.test(window.location.hostname)?"NP":"GP",nc.twGnb.envPrefix="",nc.twGnb.isRc=/rc-tw/i.test(window.location.hostname)?"rc-":"",nc.twGnb.returnUrl="",nc.twGnb.isRwdSite=!1,nc.twGnb.siteFlag="";var t="tw.ncsoft.com/static/global/nct/css/nctGnb.css",u="tw.ncsoft.com",v=".plaync.com.tw",w=["bns","aion","lineage2","mxm","irism","rk"],x=["mxm","portalMain"],y=["bns","aion","lineage2"],z=["","bns","aion","lineage2"],A=nc.twGnb.util,B="",C=null,D=null,E=null,F=null,G=null,H=null,I=null,J=null,K=null,L=null;nc.twGnb.hideUnreadSupportIcon=function(){a(".gnbNotify",D).hide()},nc.twGnb.init=function(b){if(nc.twGnb.siteFlag=b.siteFlag?b.siteFlag:"",!nc.twGnb.siteFlag){var e="",f=window.location;"NP"===nc.twGnb.platform&&("/"===f.pathname?e="portalMain":/bns/.test(f.host)||/bns/.test(f.pathname)?e="bns":/mxm/.test(f.host)||/mxm/.test(f.pathname)?e="mxm":/aion/.test(f.host)||/aion/.test(f.pathname)?e="aion":(/lineage2/.test(f.host)||/lineage2/.test(f.pathname))&&(e="lineage2")),nc.twGnb.siteFlag=e}nc.twGnb.isRwdSite=q(nc.twGnb.siteFlag),B=window.location.protocol.indexOf("https")>=0?"https":"http";var g=b.environment?String(b.environment).toLowerCase():"",h="",i=window.location.hostname;/^opdev\./.test(i)||/^op\./.test(i)?(nc.twGnb.envPrefix="opdev.",nc.twGnb.isRc="",h="http://ui-static.korea.ncsoft.corp/global/nct/css/nctGnb.css"):/^rc-tw/.test(i)?(nc.twGnb.envPrefix="rc-",nc.twGnb.isRc="rc-",h=B+"://"+nc.twGnb.isRc+t):(nc.twGnb.envPrefix="",nc.twGnb.isRc="",h=B+"://"+t),"opdev"===g||"op"===g?(nc.twGnb.envPrefix="opdev.",nc.twGnb.isRc="",h="http://ui-static.korea.ncsoft.corp/global/nct/css/nctGnb.css"):"rc"===g?(nc.twGnb.envPrefix="rc-",nc.twGnb.isRc="rc-",h=B+"://"+nc.twGnb.isRc+t):"live"===g&&(nc.twGnb.envPrefix="",nc.twGnb.isRc="",h=B+"://"+t),nc.twGnb.returnUrl=window.encodeURIComponent(A.getReturnUrl(window.location,nc.twGnb.isRc)),a("head").append('<link rel="stylesheet" type="text/css" href="'+h+'" />'),D=a("#nctGnb"),E=a("#nctFooter"),nc.twGnb.isRwdSite&&(D.addClass("rwd "+nc.twGnb.siteFlag),E.addClass("rwd "+nc.twGnb.siteFlag)),D.length>0&&d(),E.length>0&&p(),c(),a(window).resize(c)},window.setGnbRwdLayout=function(c){function d(c){c&&(p=c.breakPoint||0,q=a("#"+c.backdropId),r=a("#"+c.naviBtnId),s=a("#"+c.userLayerBtnId),t=a(r.attr(i)),u=a(s.attr(i)),k||(t.show(),u.show()),r.on("click",function(a){a.preventDefault(),a.stopPropagation(),f("left")}),s.on("click",function(c){c.preventDefault(),c.stopPropagation(),u.length>0&&(u.has(a("#mobile-userinfo-layer")).length<=0&&b(!1,u),f("right"))}),o.on("touchstart click",function(a){m&&t.has(a.target).length<=0&&g("left"),n&&u.has(a.target).length<=0&&g("right")}),e(),a(window).resize(e),window.openGnbSideWrap=f,window.closeGnbSideWrap=g)}function e(a){if(l<=0)return void(l=o.width());p<=0||(l<p&&o.width()>=p&&(m||n)&&g(),l=o.width())}function f(a){switch(a){case"left":o.addClass("show-mobile-gnb-wrap"),q.show(),k&&(t.show(),u.hide()),window.setTimeout(function(){t.addClass(h),u.removeClass(h)},10),m=!0,n=!1;break;case"right":o.addClass("show-mobile-gnb-wrap"),q.show(),k&&(t.hide(),u.show()),window.setTimeout(function(){t.removeClass(h),u.addClass(h)},10),m=!1,n=!0}}function g(a){switch(a){case"left":if(!m)return;o.removeClass("show-mobile-gnb-wrap"),k&&t.hide(),q.hide(),t.removeClass(h),m=!1;break;case"right":if(!n)return;o.removeClass("show-mobile-gnb-wrap"),k&&u.hide(),q.hide(),u.removeClass(h),n=!1;break;default:o.removeClass("show-mobile-gnb-wrap"),k&&(t.hide(),u.hide()),q.hide(),t.removeClass(h),u.removeClass(h),m=!1,n=!1}}var h="slide-in",i="data-slide-target",j=c||null,k=A.browser.isIE&&A.browser.getIEVersion()<=8,l=0,m=!1,n=!1,o=a("body"),p=0,q=null,r=null,s=null,t=null,u=null;d(j)}}(jQuery);